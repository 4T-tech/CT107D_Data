C51 COMPILER V9.56.0.0   MAIN                                                              01/24/2025 11:04:17 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          // 使用程序前，将J13调整为IO模式（2-3脚短接）
   2          #include "tim.h"
   3          
   4          unsigned int  uiTms;                  // 毫秒值
   5          unsigned int  uiSec;                  // 秒值
   6          unsigned int  uiDuty;                 // 亮度等级（占空比）
   7          
   8          sfr P0 = 0x80;
   9          sfr P2 = 0xA0;
  10          // P0输出: ucData――数据，ucAddr――地址（4~7）
  11          void P0_Out(unsigned char ucData, unsigned char ucAddr)
  12          {
  13   1        P0 = ucData;                        // P0输出数据
  14   1        P2 |= ucAddr << 5;                  // 置位P27~P25
  15   1        P2 &= 0x1f;                         // 复位P27~P25
  16   1      //XBYTE[ucAddr << 13] = ucData;       // MM模式（J13-2和J13-1相连）
  17   1      }
  18          // 关闭外设
  19          void Close_Peripheral(void)
  20          {
  21   1        P2 &= 0x1f;                         // 复位P27~P25
  22   1        P0_Out(0xff, 4);                    // 熄灭LED
  23   1        P0_Out(~0x50, 5);                   // 关闭继电器和蜂鸣器
  24   1      }
  25          // LED显示
  26          void Led_Disp(unsigned char ucLed)
  27          {
  28   1        P0_Out(~ucLed, 4);                  // LED显示
  29   1      }
  30          
  31          void Led_Proc(void);
  32          // 主函数
  33          void main(void)
  34          {
  35   1        Close_Peripheral();
  36   1        T1_Init();
  37   1        
  38   1        while (1)
  39   1        {
  40   2          T1_Proc();
  41   2          Led_Proc();
  42   2        }
  43   1      }
  44          
  45          void Led_Proc(void)
  46          {
  47   1        if(uiTms < uiDuty)
  48   1          Led_Disp(0xff);
  49   1        else
  50   1          Led_Disp(0);
  51   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.56.0.0   MAIN                                                              01/24/2025 11:04:17 PAGE 2   

   CODE SIZE        =     72    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
